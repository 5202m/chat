function openLive800Chat(e){var t="https://www.onlineservice-hk.com/k800/chatClient/chatbox.jsp?companyID=209&s=1";e?location.href=t:window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}function openQQChatByCommonv3(){var e="http://crm2.qq.com/page/portalpage/wpa.php?uin=800018282&cref=&ref=&f=1&ty=1&ap=&as=";window.open(e,"QQChatindow","height=544, width=644,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}function openQQChatByCommonjs(){var e="http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800018282";window.open(e)}var common={remove:function(e,t){return isNaN(t)||t>e.length?!1:void e.splice(t,1)},joinSplit:function(e){return",".concat(e).concat(",")},isBlank:function(e){return void 0==e||null==e||"undefined"==e||"null"==e||""==$.trim(e)},isValid:function(e){return!this.isBlank(e)},trim:function(e){return this.isBlank(e)?"":e.toString().replace(/(^\s*)|(\s*$)/g,"")},escapeHtml:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML.replace(/"/g,'\\"')},encodeHtml:function(e){return this.isBlank(e)?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},formatterDate:function(e,t){t||(t="-"),e instanceof Date||(e=new Date(e));var n=e.getFullYear()+t+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+t+(e.getDate()<10?"0"+e.getDate():e.getDate());return n},getHHMMSS:function(e){e instanceof Date||(e=new Date(e));var t=(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds());return t},getMMSS:function(e){return e instanceof Date||(e=new Date(e)),(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},getHHMM:function(e){e instanceof Date||(e=new Date(e));var t=(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes());return t},formatterDateTime:function(e,t){if(t||(t="-"),e instanceof Date||(e=new Date(e)),"Invalid Date"==e)return"";var n=e.getFullYear()+t+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+t+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds());return n},longMsTimeToDateTime:function(e,t){var n=new Date(e);return this.formatterDateTime(n,t)},showBox:function(e,t){$(e).slideDown(),$(t||".layer-shadow").show()},hideBox:function(e,t){$(e).slideUp(),$(t||".layer-shadow").hide()},containSplitStr:function(e,t){return common.isBlank(e)||common.isBlank(t)?!1:-1!=(","+e+",").indexOf(","+t+",")},getJson:function(e,t,n,s,a){var r=null;return $.ajax({url:e,type:"POST",timeout:1e5,cache:!1,async:void 0!=s?s:!1,dataType:"json",data:t,success:"function"==typeof n?n:function(e){r=e},error:function(e,t){"function"==typeof a?a(t):common.isValid(e.responseText)&&"OK"!=e.statusText?alert(e.responseText):alert("请求超时,请重试!")}}),r},arraySort:function(e,t){return function(n,s){return t?n[e]<s[e]:n[e]>s[e]}},randomNumber:function(e){for(var t="",n=0;e>n;n++)t+=Math.floor(10*Math.random());return t},isMobilePhone:function(e){return/(^[0-9]{11})$|(^86(-){0,3}[0-9]{11})$/.test(e)},dateTimeWeekCheck:function(e,t,n){if(this.isBlank(e))return!!t;$.isPlainObject(e)||(e=JSON.parse(e));var s=n?new Date(n):new Date,a=!1,r=this.formatterDate(s);if(a=this.isBlank(e.beginDate)||r>=e.beginDate,a&&(a=this.isBlank(e.endDate)||r<=e.endDate),!a)return!1;var o=e.weekTime;if(this.isBlank(o))return a;var i=null,u=null,l=!1;for(var c in o)if(i=o[c],(!this.isValid(i.week)||s.getDay()==parseInt(i.week))&&(u=this.getHHMMSS(s),l=this.isBlank(i.beginTime)||u>=i.beginTime,l&&(l=this.isBlank(i.endTime)||u<=i.endTime),l))break;return l},arrayUnique:function(e){if(!e)return e;for(var t,n=[],s={},a=0;null!=(t=e[a]);a++)s[t]||(n.push(t),s[t]=!0);return n},isWebSocket:function(){return window.WebSocket},getSocket:function(e,t,n){return common.isWebSocket()?(console.log("used websocket!"),e.connect(t.webSocket+"/"+n,{transports:["websocket"]})):e.connect(t.socketIO+"/"+n)},refreshSession:function(){setInterval(function(){$.get("/refreshSession?t="+new Date,function(){})},9e5)},randomNumber:function(e){for(var t="",n=0;e>n;n++)t+=Math.floor(10*Math.random());return t},clearMsgHtml:function(e){var e=e.replace(/((^((&nbsp;)+))|\n|\t|\r)/g,"").replace(/<\/?(?!(img|IMG)\s+src="[^>"]+\/face\/[^>"]+"\s*>)[^>]*>/g,"");return e&&(e=$.trim(e)),e},formatSyllabus:function(e,t,n,s){var a={dayCN:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],indexCN:["第一节","第二节","第三节","第四节","第五节","第六节","第七节","第八节"],courseCls:["prev","ing","next"],tableCls:"syllabus"},r=$.extend({},a,s),o=function(e,t,n,s,a){var o=0,i=(e+6)%7,u=(s.day+6)%7;return o=i>u?2:u>i?0:a?1:n<=s.time?0:t>s.time?2:1,r.courseCls[o]},i=[];try{if(e){var u=JSON.parse(e),l=u.days?u.days.length:0;if(l>0)if(1===n){i.push('<div class="sy_panel">');var c=t.timeLong-864e5*((t.day+6)%7),d=null,p=null,h=null;i.push('<div class="sy_nav">');for(var f=' style="width:'+100/l+'%;"',g=0;l>g;g++)d=new Date(c+(u.days[g].day+6)%7*864e5),p=d.getFullYear()+"-"+(d.getMonth()<9?"0":"")+(d.getMonth()+1)+"-"+(d.getDate()<10?"0":"")+d.getDate(),h=u.days[g].day==t.day?' class="active"':"",i.push('<a href="javascript:void(0)" d="'+u.days[g].day+'"'+h+f+">"+r.dayCN[u.days[g].day]+"<br/><span>"+p+'</span><em class="dir">^</em></a>');i.push("</div>"),i.push('<div class="sy_cont"><div>'),i.push('<table cellpadding="0" cellspacing="0" border="0" class="'+r.tableCls+'">');for(var m=null,y=null,g=0;l>g;g++){if(i.push('<tbody d="'+u.days[g].day+'">'),0==u.days[g].status)y=o(u.days[g].day,null,null,t,!0),i.push('<tr class="'+y+'" width="100%"><td>休市</td></tr>');else for(var v=0,w=u.timeBuckets.length;w>v;v++)m=u.timeBuckets[v],y=o(u.days[g].day,m.startTime,m.endTime,t,!1),0==m.course[g].status?(i.push('<tr class="'+y+'">'),i.push('<td width="25%">'+m.startTime+"-"+m.endTime+"</td>"),i.push('<td colspan="2" width="75%">休市</td>'),i.push("</tr>")):m.course[g].lecturer&&(i.push('<tr class="'+y+'">'),i.push('<td width="25%">'+m.startTime+"-"+m.endTime+"</td>"),i.push('<td width="25%">'+m.course[g].lecturer+"</td>"),i.push('<td width="50%">'+m.course[g].title+"</td>"),i.push("</tr>"));i.push("</tbody>")}i.push("</table>"),i.push("</div></div>"),i.push("</div>")}else if(2===n){i.push('<table cellpadding="0" cellspacing="1" border="0" class="'+r.tableCls+'">'),i.push("<tr>"),i.push("<th>星期\\节次</th>");for(var w=u.timeBuckets?u.timeBuckets.length:0,m=null,y=null,v=0;w>v;v++)m=u.timeBuckets[v],i.push("<th>"+r.indexCN[v]+"<br><span>("+m.startTime+"-"+m.endTime+")</span></th>");i.push("</tr>");for(var b=null,g=0,M=u.days?u.days.length:0;M>g;g++){if(b=u.days[g],i.push("<tr>"),i.push("<th>"+r.dayCN[b.day]+"</th>"),0==b.status)y=o(b.day,null,null,t,!0),i.push('<td class="'+y+'" colspan="'+w+'">休市</td>');else for(var v=0;w>v;v++)m=u.timeBuckets[v],y=o(b.day,m.startTime,m.endTime,t,!1),i.push('<td class="'+y+'">'+(0==m.course[g].status?"休市":m.course[g].lecturer)+"</td>");i.push("</tr>")}i.push("</table>")}else if(3===n)for(var b=null,m=null,y=null,g=0,M=u.days?u.days.length:0;M>g;g++){if(b=u.days[g],i.push("<tr>"),i.push("<th>"+r.dayCN[b.day]+"<i></i></th>"),i.push("<td>"),0==b.status)y=o(b.day,null,null,t,!0),i.push('<p class="'+y+'">休市</p>');else for(var v=0,w=u.timeBuckets?u.timeBuckets.length:0;w>v;v++)m=u.timeBuckets[v],m.course[g].lecturer&&(y=o(b.day,m.startTime,m.endTime,t,!1),i.push('<p class="'+y+'">'),i.push("<span>"+m.startTime+"-"+m.endTime+"</span>"),0==m.course[g].status?i.push("<span>休市</span>"):(i.push("<span>"+m.course[g].lecturer+"</span>"),i.push('<span class="item">'+m.course[g].title+"</span>")),i.push("</p>"));i.push("</td>"),i.push("</tr>"),i.push('<tr><td colspan="2" class="space"></td></tr>')}}}catch(k){return console.error("formatSyllabus->"+k),""}return i.join("")},isMobile:function(){return/(iphone|ipod|ipad|android|mobile|playbook|bb10|meego)/.test(navigator.userAgent.toLowerCase())},copyObject:function(e,t,n){if(!t)return e;for(var s in e)t.hasOwnProperty(s)&&common.isValid(t[s])&&(e[s]=t[s]);if(n)for(var s in t)e.hasOwnProperty(s)||(e[s]=t[s])},isRightName:function(e){return!/^([0-9]{2,20})$/g.test(e)&&/^([\w\u4e00-\u9fa5]{2,20})$/g.test(e)},randomIndex:function(e){var t=parseInt(Math.round(Math.random()*e));return t==e&&(t=e-1),t}};window.console||(console=function(){function e(){}function t(){return null==n&&(n=new e),n}var n=null;return e.prototype={log:function(e){},error:function(e){}},t()}()),$.fn.focusEnd=function(){$(this).focus();var e=$("<span/>").appendTo($(this)),t=e.get(0),n=null,s=null;return document.selection?(n=document.body.createTextRange(),n.moveToElementText(t),n.select()):window.getSelection&&(n=document.createRange(),n.selectNode(t),s=window.getSelection(),s.removeAllRanges(),s.addRange(n)),e.remove(),this};
(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function r(){}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function i(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function u(t,e){return"onerror"===t?void At.on("error",e):2!==arguments.length?At[t]:void(At[t]=e)}function a(){setTimeout(function(){for(var t,e=0;e<St.length;e++){t=St[e];var n=t.payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),At.trigger(t.name,t.payload)}St.length=0},50)}function s(t,e,n){1===St.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:n&&n._id,label:e._label,timeStamp:bt(),error:At["instrument-with-stack"]?new Error(e._label):null}})&&a()}function c(t,e,n){var r=this,o=r._state;if(o===Ht&&!t||o===Vt&&!e)return At.instrument&&xt("chained",r,r),r;r._onError=null;var i=new r.constructor(w,n),u=r._result;if(At.instrument&&xt("chained",r,i),o){var a=arguments[o-1];At.async(function(){M(o,i,a,u)})}else C(r,i,t,e);return i}function f(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var r=new n(w,e);return x(r,t),r}function l(t,e,n){return t===Ht?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function p(t,e,n,r){this._instanceConstructor=t,this.promise=new t(w,r),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):O(this.promise,this._validationError())}function h(t,e){return new Ot(this,t,!0,e).promise}function v(t,e){function n(t){x(i,t)}function r(t){O(i,t)}var o=this,i=new o(w,e);if(!wt(t))return O(i,new TypeError("You must pass an array to race.")),i;for(var u=t.length,a=0;i._state===qt&&u>a;a++)C(o.resolve(t[a]),void 0,n,r);return i}function d(t,e){var n=this,r=new n(w,e);return O(r,t),r}function y(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function m(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function _(t,e){this._id=Mt++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],At.instrument&&xt("created",this),w!==t&&("function"!=typeof t&&y(),this instanceof _?N(this,t):m())}function g(){return new TypeError("A promises callback cannot return that same promise.")}function w(){}function b(t){try{return t.then}catch(e){return Dt.error=e,Dt}}function k(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function E(t,e,n){At.async(function(t){var r=!1,o=k(n,e,function(n){r||(r=!0,e!==n?x(t,n,void 0):j(t,n))},function(e){r||(r=!0,O(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,O(t,o))},t)}function A(t,e){e._state===Ht?j(t,e._result):e._state===Vt?(e._onError=null,O(t,e._result)):C(e,void 0,function(n){e!==n?x(t,n,void 0):j(t,n)},function(e){O(t,e)})}function S(t,n,r){n.constructor===t.constructor&&r===Tt&&constructor.resolve===jt?A(t,n):r===Dt?O(t,Dt.error):void 0===r?j(t,n):e(r)?E(t,n,r):j(t,n)}function x(e,n){e===n?j(e,n):t(n)?S(e,n,b(n)):j(e,n)}function T(t){t._onError&&t._onError(t._result),R(t)}function j(t,e){t._state===qt&&(t._result=e,t._state=Ht,0===t._subscribers.length?At.instrument&&xt("fulfilled",t):At.async(R,t))}function O(t,e){t._state===qt&&(t._state=Vt,t._result=e,At.async(T,t))}function C(t,e,n,r){var o=t._subscribers,i=o.length;t._onError=null,o[i]=e,o[i+Ht]=n,o[i+Vt]=r,0===i&&t._state&&At.async(R,t)}function R(t){var e=t._subscribers,n=t._state;if(At.instrument&&xt(n===Ht?"fulfilled":"rejected",t),0!==e.length){for(var r,o,i=t._result,u=0;u<e.length;u+=3)r=e[u],o=e[u+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function I(){this.error=null}function P(t,e){try{return t(e)}catch(n){return Lt.error=n,Lt}}function M(t,n,r,o){var i,u,a,s,c=e(r);if(c){if(i=P(r,o),i===Lt?(s=!0,u=i.error,i=null):a=!0,n===i)return void O(n,g())}else i=o,a=!0;n._state!==qt||(c&&a?x(n,i):s?O(n,u):t===Ht?j(n,i):t===Vt&&O(n,i))}function N(t,e){var n=!1;try{e(function(e){n||(n=!0,x(t,e))},function(e){n||(n=!0,O(t,e))})}catch(r){O(t,r)}}function q(t,e,n){this._superConstructor(t,e,!1,n)}function H(t,e){return new q(Nt,t,e).promise}function V(t,e){return Nt.all(t,e)}function D(t,e){$t[Kt]=t,$t[Kt+1]=e,Kt+=2,2===Kt&&Bt()}function L(){var t=process.nextTick,e=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(K)}}function U(){return function(){Ut(K)}}function B(){var t=0,e=new Qt(K),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function Y(){var t=new MessageChannel;return t.port1.onmessage=K,function(){t.port2.postMessage(0)}}function J(){return function(){setTimeout(K,1)}}function K(){for(var t=0;Kt>t;t+=2){var e=$t[t],n=$t[t+1];e(n),$t[t]=void 0,$t[t+1]=void 0}Kt=0}function F(){try{var t=require,e=t("vertx");return Ut=e.runOnLoop||e.runOnContext,U()}catch(n){return J()}}function G(t){var e={};return e.promise=new Nt(function(t,n){e.resolve=t,e.reject=n},t),e}function z(t,e){return Nt.all(t,e)}function Q(t,e){return Nt.resolve(t,e).then(function(t){return z(t,e)})}function W(t,n,r){var o=wt(t)?z(t,r):Q(t,r);return o.then(function(t){if(!e(n))throw new TypeError("You must pass a function as filter's second argument.");for(var o=t.length,i=new Array(o),u=0;o>u;u++)i[u]=n(t[u]);return z(i,r).then(function(e){for(var n=new Array(o),r=0,i=0;o>i;i++)e[i]&&(n[r]=t[i],r++);return n.length=r,n})})}function X(t,e,n){this._superConstructor(t,e,!0,n)}function $(t,e,n){this._superConstructor(t,e,!1,n)}function Z(t,e){return new $(Nt,t,e).promise}function tt(t,e){return new ee(Nt,t,e).promise}function et(t,n,r){return Nt.all(t,r).then(function(t){if(!e(n))throw new TypeError("You must pass a function as map's second argument.");for(var o=t.length,i=new Array(o),u=0;o>u;u++)i[u]=n(t[u]);return Nt.all(i,r)})}function nt(){this.value=void 0}function rt(t){try{return t.then}catch(e){return ue.value=e,ue}}function ot(t,e,n){try{t.apply(e,n)}catch(r){return ue.value=r,ue}}function it(t,e){for(var n,r,o={},i=t.length,u=new Array(i),a=0;i>a;a++)u[a]=t[a];for(r=0;r<e.length;r++)n=e[r],o[n]=u[r+1];return o}function ut(t){for(var e=t.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=t[r];return n}function at(t,e){return{then:function(n,r){return t.call(e,n,r)}}}function st(t,e){var n=function(){for(var n,r=this,o=arguments.length,i=new Array(o+1),u=!1,a=0;o>a;++a){if(n=arguments[a],!u){if(u=lt(n),u===ae){var s=new Nt(w);return O(s,ae.value),s}u&&u!==!0&&(n=at(u,n))}i[a]=n}var c=new Nt(w);return i[o]=function(t,n){t?O(c,t):void 0===e?x(c,n):e===!0?x(c,ut(arguments)):wt(e)?x(c,it(arguments,e)):x(c,n)},u?ft(c,i,t,r):ct(c,i,t,r)};return n.__proto__=t,n}function ct(t,e,n,r){var o=ot(n,r,e);return o===ue&&O(t,o.value),t}function ft(t,e,n,r){return Nt.all(e).then(function(e){var o=ot(n,r,e);return o===ue&&O(t,o.value),t})}function lt(t){return t&&"object"==typeof t?t.constructor===Nt?!0:rt(t):!1}function pt(t,e){return Nt.race(t,e)}function ht(t,e){return Nt.reject(t,e)}function vt(t,e){return Nt.resolve(t,e)}function dt(t){throw setTimeout(function(){throw t}),t}function yt(t,e){At.async(t,e)}function mt(){At.on.apply(At,arguments)}function _t(){At.off.apply(At,arguments)}var gt;gt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var wt=gt,bt=Date.now||function(){return(new Date).getTime()},kt=Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return r.prototype=t,new r},Et={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var n,r=i(this);n=r[t],n||(n=r[t]=[]),-1===o(n,e)&&n.push(e)},off:function(t,e){var n,r,u=i(this);return e?(n=u[t],r=o(n,e),void(-1!==r&&n.splice(r,1))):void(u[t]=[])},trigger:function(t,e,n){var r,o,u=i(this);if(r=u[t])for(var a=0;a<r.length;a++)(o=r[a])(e,n)}},At={instrument:!1};Et.mixin(At);var St=[],xt=s,Tt=c,jt=f,Ot=p;p.prototype._validateInput=function(t){return wt(t)},p.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},p.prototype._init=function(){this._result=new Array(this.length)},p.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===qt&&t>r;r++)this._eachEntry(n[r],r)},p.prototype._settleMaybeThenable=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===jt){var o=b(t);if(o===Tt&&t._state!==qt)t._onError=null,this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=this._makeResult(Ht,e,t);else if(n===Nt){var i=new n(w);S(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},p.prototype._eachEntry=function(t,e){n(t)?this._settleMaybeThenable(t,e):(this._remaining--,this._result[e]=this._makeResult(Ht,e,t))},p.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===qt&&(this._remaining--,this._abortOnReject&&t===Vt?O(r,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&j(r,this._result)},p.prototype._makeResult=function(t,e,n){return n},p.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,function(t){n._settledAt(Ht,e,t)},function(t){n._settledAt(Vt,e,t)})};var Ct=h,Rt=v,It=d,Pt="rsvp_"+bt()+"-",Mt=0,Nt=_;_.cast=jt,_.all=Ct,_.race=Rt,_.resolve=jt,_.reject=It,_.prototype={constructor:_,_guidKey:Pt,_onError:function(t){var e=this;At.after(function(){e._onError&&At.trigger("error",t,e._label)})},then:Tt,"catch":function(t,e){return this.then(void 0,t,e)},"finally":function(t,e){var n=this,r=n.constructor;return n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})},e)}};var qt=void 0,Ht=1,Vt=2,Dt=new I,Lt=new I;q.prototype=kt(Ot.prototype),q.prototype._superConstructor=Ot,q.prototype._makeResult=l,q.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var Ut,Bt,Yt=H,Jt=V,Kt=0,Ft=({}.toString,D),Gt="undefined"!=typeof window?window:void 0,zt=Gt||{},Qt=zt.MutationObserver||zt.WebKitMutationObserver,Wt="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Xt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$t=new Array(1e3);Bt=Wt?L():Qt?B():Xt?Y():void 0===Gt&&"function"==typeof require?F():J();var Zt=G,te=W,ee=X;X.prototype=kt(Ot.prototype),X.prototype._superConstructor=Ot,X.prototype._init=function(){this._result={}},X.prototype._validateInput=function(t){return t&&"object"==typeof t},X.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},X.prototype._enumerate=function(){var t=this,e=t.promise,n=t._input,r=[];for(var o in n)e._state===qt&&Object.prototype.hasOwnProperty.call(n,o)&&r.push({position:o,entry:n[o]});var i=r.length;t._remaining=i;for(var u,a=0;e._state===qt&&i>a;a++)u=r[a],t._eachEntry(u.entry,u.position)},$.prototype=kt(ee.prototype),$.prototype._superConstructor=Ot,$.prototype._makeResult=l,$.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var ne,re=Z,oe=tt,ie=et,ue=new nt,ae=new nt,se=st;if("object"==typeof self)ne=self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");ne=global}var ce=ne,fe=pt,le=ht,pe=vt,he=dt;if(At.async=Ft,At.after=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var ve=window.__PROMISE_INSTRUMENTATION__;u("instrument",!0);for(var de in ve)ve.hasOwnProperty(de)&&mt(de,ve[de])}var ye={race:fe,Promise:Nt,allSettled:Yt,hash:oe,hashSettled:re,denodeify:se,on:mt,off:_t,map:ie,filter:te,resolve:pe,reject:le,all:Jt,rethrow:he,defer:Zt,EventTarget:Et,configure:u,async:yt};"function"==typeof define&&define.amd?define(function(){return ye}):"undefined"!=typeof module&&module.exports?module.exports=ye:"undefined"!=typeof ce&&(ce.RSVP=ye)}).call(this),function(t,e){"use strict";var n=e.head||e.getElementsByTagName("head")[0],r="basket-",o=5e3,i=[],u=function(t,e){try{return localStorage.setItem(r+t,JSON.stringify(e)),!0}catch(n){if(n.name.toUpperCase().indexOf("QUOTA")>=0){var o,i=[];for(o in localStorage)0===o.indexOf(r)&&i.push(JSON.parse(localStorage[o]));return i.length?(i.sort(function(t,e){return t.stamp-e.stamp}),basket.remove(i[0].key),u(t,e)):void 0}return}},a=function(t){var e=new RSVP.Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status&&r.responseText?e({content:r.responseText,type:r.getResponseHeader("content-type")}):n(new Error(r.statusText)))},setTimeout(function(){r.readyState<4&&r.abort()},basket.timeout),r.send()});return e},s=function(t){return a(t.url).then(function(e){var n=c(t,e);return t.skipCache||u(t.key,n),n})},c=function(t,e){var n=+new Date;return t.data=e.content,t.originalType=e.type,t.type=t.type||e.type,t.skipCache=t.skipCache||!1,t.stamp=n,t.expire=n+60*(t.expire||o)*60*1e3,t},f=function(t,e){return!t||t.expire-+new Date<0||e.unique!==t.unique||basket.isValidItem&&!basket.isValidItem(t,e)},l=function(t){var e,n,r;if(t.url)return t.key=t.key||t.url,e=basket.get(t.key),t.execute=t.execute!==!1,r=f(e,t),t.live||r?(t.unique&&(t.url+=(t.url.indexOf("?")>0?"&":"?")+"basket-unique="+t.unique),n=s(t),t.live&&!r&&(n=n.then(function(t){return t},function(){return e}))):(e.type=t.type||e.originalType,e.execute=t.execute,n=new RSVP.Promise(function(t){t(e)})),n},p=function(t){var r=e.createElement("script");r.defer=!0,r.text=t.data,n.appendChild(r)},h={"default":p},v=function(t){return t.type&&h[t.type]?h[t.type](t):h["default"](t)},d=function(t){return t.map(function(t){return t.execute&&v(t),t})},y=function(){var t,e,n=[];for(t=0,e=arguments.length;e>t;t++)n.push(l(arguments[t]));return RSVP.all(n)},m=function(){var t=y.apply(null,arguments),e=this.then(function(){return t}).then(d);return e.thenRequire=m,e};t.basket={version:0,inBasketHas:function(t){for(var e in i)if(i[e]==t)return!0},require:function(){store.enabled&&store.get("web_vs")!=this.version&&(store.set("web_vs",this.version),basket.clear());for(var t=[],e=0,n=arguments.length-1;n>e;e++)arguments[e].execute=arguments[e].execute!==!1,arguments[e].once&&this.inBasketHas(arguments[e].execute)?arguments[e].execute=!1:arguments[e].execute!==!1&&!this.inBasketHas(arguments[e].execute)<0&&i.push(arguments[e].execute),t.push(arguments[e].url);var r=arguments;if(navigator.userAgent.toLowerCase().indexOf("msie 8")>0&&t.length>0&&r[r.length-1]instanceof Function)return LazyLoad.js(t,function(){r[r.length-1]()}),{then:function(){}};arguments[r.length-1]={url:"local",execute:!1};var o=y.apply(null,arguments).then(d);return o.thenRequire=m,o},remove:function(t){return localStorage.removeItem(r+t),this},get:function(t){var e=localStorage.getItem(r+t);try{return JSON.parse(e||"false")}catch(n){return!1}},clear:function(t){var e,n,o=+new Date;for(e in localStorage)n=e.split(r)[1],n&&(!t||this.get(n).expire<=o)&&this.remove(n);return this},isValidItem:null,timeout:5e3,addHandler:function(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){h[t]=e})},removeHandler:function(t){basket.addHandler(t,void 0)}},basket.clear(!0)}(this,document);